#IBM-Watson: AlchemyAPI仕様記録

##環境構築

```bash
git clone https://github.com/AlchemyAPI/alchemyapi_ruby.git
cd alchemyapi_ruby
bundle install
ruby alchemyapi.rb YOUR_KEY_HERE
ruby example.rb
```

```ruby
demo_text = "Usamimi graduate student at the Univ. of Tokyo / Interested in Human Augmentation, Computer Vision, Developer Productivity, Application architecture design "

alchemyapi = AlchemyAPI.new()
```

#各機能の使用方法

TestText
> 
####DemoText  
> Usamimi graduate student at the Univ. of Tokyo / Interested in Human Augmentation, Computer Vision, Developer Productivity, Application architecture design
####DemoURL
> http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen

##表現抽出

###Method

```ruby
alchemyapi.entities('text', demo_text, { 'sentiment'=>1 })
```

###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "",
        "totalTransactions" => "2",
        "language" => "english",
        "entities" => [
            [0] {
                "type" => "JobTitle",
                "relevance" => "0.33",
                "sentiment" => {
                    "type" => "neutral"
                },
                "count" => "1",
                "text" => "graduate student"
            },
        [1] {
            "type" => "Organization",
            "relevance" => "0.33",
            "sentiment" => {
                "type" => "neutral"
            },
            "count" => "1",
            "text" => "Univ. of Tokyo"
        },
        [2] {
            "type" => "JobTitle",
            "relevance" => "0.33",
            "sentiment" => {
                "type" => "positive",
                "score" => "0.425668"
            },
            "count" => "1",
            "text" => "Developer"
        }
    ]
}
```

##キーワード抽出

###Method

```ruby
alchemyapi.keywords('text', demo_text, { 'sentiment'=>1 })
```

###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "totalTransactions" => "2",
        "language" => "english",
        "keywords" => [
            [0] {
                "relevance" => "0.904939",
                "sentiment" => {
                    "type" => "neutral"
                },
                "text" => "Usamimi graduate student"
            },
        [1] {
            "relevance" => "0.736243",
            "sentiment" => {
                "type" => "neutral"
            },
            "text" => "Human Augmentation"
        },
        [2] {
            "relevance" => "0.672343",
            "sentiment" => {
                "score" => "0.425668",
                "type" => "positive"
            },
            "text" => "Developer Productivity"
        },
        [3] {
            "relevance" => "0.534621",
            "sentiment" => {
                "score" => "0.367112",
                "type" => "positive"
            },
            "text" => "Application architecture"
        },
        [4] {
            "relevance" => "0.379539",
            "sentiment" => {
                "type" => "neutral"
            },
            "text" => "Tokyo"
        },
        [5] {
            "relevance" => "0.241532",
            "sentiment" => {
                "type" => "neutral"
            },
            "text" => "Univ."
        },
        [6] {
            "relevance" => "0.240675",
            "sentiment" => {
                "type" => "neutral"
            },
            "text" => "Interested"
        },
        [7] {
            "relevance" => "0.239391",
            "sentiment" => {
                "type" => "neutral"
            },
            "text" => "Vision"
        },
        [8] {
            "relevance" => "0.237892",
            "sentiment" => {
                "score" => "0.367112",
                "type" => "positive"
            },
            "text" => "design"
        }
    ]
}
```
##コンセプトのタグ付け

###Method
```ruby
alchemyapi.concepts('text', demo_text)
```

###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "language" => "english",
        "concepts" => [
            [0] {
                "text" => "Engineering",
                "relevance" => "0.942753",
                "dbpedia" => "http://dbpedia.org/resource/Engineering",
                "freebase" => "http://rdf.freebase.com/ns/m.02ky346"
            },
        [1] {
            "text" => "University",
            "relevance" => "0.878525",
            "dbpedia" => "http://dbpedia.org/resource/University",
            "freebase" => "http://rdf.freebase.com/ns/m.07tf8",
            "opencyc" => "http://sw.opencyc.org/concept/Mx4rvVjjvpwpEbGdrcN5Y29ycA"
        },
        [2] {
            "text" => "Graduate school",
            "relevance" => "0.7476",
            "dbpedia" => "http://dbpedia.org/resource/Graduate_school",
            "freebase" => "http://rdf.freebase.com/ns/m.01yslh",
            "opencyc" => "http://sw.opencyc.org/concept/Mx4rwQrhoZwpEbGdrcN5Y29ycA"
        }
    ]
}

```

##センチメント分析

###Method

```ruby
alchemyapi.sentiment('html', demo_html)
```

###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "totalTransactions" => "1",
        "language" => "english",
        "docSentiment" => {
            "score" => "0.447886",
            "type" => "positive"
        }
}

```

##ターゲットを絞った評判分析

###Method

```ruby
alchemyapi.sentiment_targeted('text', demo_text, 'Tokyo')
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "totalTransactions" => "1",
        "language" => "english",
        "docSentiment" => {
            "type" => "neutral"
        }
}
```

##テキスト抽出

###Method

```ruby
alchemyapi.text('url', demo_url)
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen",
        "language" => "english",
        "text" => "If there's one Thanksgiving mistake Jack Bishop sees more than any other, it's people rushing to carve their birds. Bishop is editorial director of the public TV series America's Test Kitchen. He tells Fresh Air's Terry Gross, \"Turkey needs to rest before you carve it ... and a lot fewer juices will end up on the carving board.\"\nBishop and Bridget Lancaster, also of America's Test Kitchen, share their tips for buying, seasoning and cooking a turkey, and describe some of their favorite side dishes.\nOn buying, seasoning and carving your turkey\nLancaster: Don't buy too big of a bird — 12 to 14 pounds is kind of the limit. Any larger than that and you're going to have a really big problem cooking it evenly because ... the breast meat tends to cook a lot faster than the dark meat. And it's also a problem of mechanics: It's really hard to get a 20-pound turkey into some of the more modern ovens. ...\nAfter that, it's really making sure you season the turkey. We like natural turkeys, ones that aren't pre-brined or injected, so you either want to brine it — soak the turkey in saltwater solution — or you can rub salt..."
}
```

##著者の抽出

###Method

```ruby
alchemyapi.author('url', demo_url)
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen",
        "author" => "Author Interviews"
}

```````

##言語検出

###Method

```ruby
alchemyapi.language('text', demo_text)
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "",
        "language" => "english",
        "iso-639-1" => "en",
        "iso-639-2" => "eng",
        "iso-639-3" => "eng",
        "ethnologue" => "http://www.ethnologue.com/show_language.asp?code=eng",
        "native-speakers" => "309-400 million",
        "wikipedia" => "http://en.wikipedia.org/wiki/English_language"
}

```

##タイトル抽出

###Method

```ruby
alchemyapi.title('url', demo_url)
```

###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen",
        "title" => "Don't Stuff The Turkey And Other Tips From 'America's Test Kitchen'"
}
```

##関連の抽出

###Method

```ruby
alchemyapi.relations('text', demo_text)
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "",
        "language" => "english",
        "relations" => []
}
```

##テキストのカテゴリー

###Method

```ruby
alchemyapi.category('text', demo_text)
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "",
        "language" => "english",
        "category" => "recreation",
        "score" => "0.0708333"
}
```

##フィードの検出

###Method

```ruby
alchemyapi.feeds('url', demo_url)
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen",
        "feeds" => [
            [0] {
                "feed" => "http://www.npr.org/rss/rss.php?id=1053"
            }
        ]
}
```

##マイクロフォーマットの解析

###Method

```ruby
alchemyapi.microformats('url', demo_url)
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen",
        "microformats" => []
}

```

##部類

###Method

```ruby
alchemyapi.taxonomy('url', demo_url)
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen",
        "totalTransactions" => "1",
        "language" => "english",
        "taxonomy" => [
            [0] {
                "label" => "/food and drink/desserts and baking",
                "score" => "0.859931"
            },
        [1] {
            "confident" => "no",
            "label" => "/home and garden/appliances/small appliances/food processors",
            "score" => "0.378192"
        },
        [2] {
            "confident" => "no",
            "label" => "/business and industrial/energy/oil",
            "score" => "0.303392"
        }
        ]
}
```

##画像の抽出

###Method

```ruby
alchemyapi.image_extract('url', demo_url, { 'extractMode'=>'trust-metadata' })
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen",
        "image" => "https://media.npr.org/assets/img/2016/08/03/food_wars_shonen_jump-954a96966464b40330016616ff4756f52879d508.jpg?s=300"
}
```

##組み合わせ

###Method

```ruby
alchemyapi.combined('url', demo_url, { 'extract'=>'page-image,keyword,entity' })
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "url" => "http://www.npr.org/2013/11/26/247336038/dont-stuff-the-turkey-and-other-tips-from-americas-test-kitchen",
        "totalTransactions" => "3",
        "language" => "english",
        "image" => "https://media.npr.org/assets/img/2016/08/03/food_wars_shonen_jump-954a96966464b40330016616ff4756f52879d508.jpg?s=300",
        "keywords" => [
            [ 0] {
                "text" => "potatoes",
                "relevance" => "0.994585"
            },
        [ 1] {
            "text" => "test kitchen",
            "relevance" => "0.912028"
        },
        [ 2] {
            "text" => "tablespoons unsalted butter",
            "relevance" => "0.892031"
        },
        [ 3] {
            "text" => "sweet potatoes",
            "relevance" => "0.85253"
        },
        [ 4] {
            "text" => "russet potatoes",
            "relevance" => "0.751766"
        },
        [ 5] {
            "text" => "traditional mashed potatoes",
            "relevance" => "0.738352"
        },
        [ 6] {
            "text" => "cold mashed potatoes",
            "relevance" => "0.732709"
        },
        [ 7] {
            "text" => "fluffier mashed potatoes",
            "relevance" => "0.731083"
        },
        [ 8] {
            "text" => "pounds russet potatoes",
            "relevance" => "0.716649"
        },
        [ 9] {
            "text" => "light brown sugar",
            "relevance" => "0.695147"
        },
        [10] {
            "text" => "warm half-and-half",
            "relevance" => "0.669316"
        },
        [11] {
            "text" => "regular potatoes",
            "relevance" => "0.655563"
        },
        [12] {
            "text" => "little bit",
            "relevance" => "0.654194"
        },
        [13] {
            "text" => "Place potatoes",
            "relevance" => "0.636303"
        },
        [14] {
            "text" => "turkey",
            "relevance" => "0.633221"
        },
        [15] {
            "text" => "Season potatoes",
            "relevance" => "0.629819"
        },
        [16] {
            "text" => "ice cold stuffing",
            "relevance" => "0.605615"
        },
        [17] {
            "text" => "fairly hot stuffing",
            "relevance" => "0.602224"
        },
        [18] {
            "text" => "mistake Jack Bishop",
            "relevance" => "0.600447"
        },
        [19] {
            "text" => "public TV series",
            "relevance" => "0.598525"
        },
        [20] {
            "text" => "little salt",
            "relevance" => "0.591365"
        },
        [21] {
            "text" => "breast meat",
            "relevance" => "0.590048"
        },
        [22] {
            "text" => "teaspoons salt",
            "relevance" => "0.588283"
        },
        [23] {
            "text" => "teaspoon salt",
            "relevance" => "0.582494"
        },
        [24] {
            "text" => "6. Set pan",
            "relevance" => "0.582284"
        },
        [25] {
            "text" => "cup warm half-and-half",
            "relevance" => "0.580173"
        },
        [26] {
            "text" => "corn syrup",
            "relevance" => "0.57002"
        },
        [27] {
            "text" => "pretty high temperature",
            "relevance" => "0.569792"
        },
        [28] {
            "text" => "nice final blast",
            "relevance" => "0.569628"
        },
        [29] {
            "text" => "food processor",
            "relevance" => "0.569207"
        }
    ],
    "entities" => [
        [ 0] {
            "type" => "Country",
            "relevance" => "0.733377",
            "count" => "11",
            "text" => "Turkey",
            "disambiguated" => {
                "subType" => [
                    [0] "Location",
                [1] "Brand",
                [2] "GovernmentalJurisdiction",
                [3] "ProjectParticipant"
                ],
                "name" => "Turkey",
                "website" => "http://www.tourismturkey.org/",
                "dbpedia" => "http://dbpedia.org/resource/Turkey",
                "freebase" => "http://rdf.freebase.com/ns/m.01znc_",
                "ciaFactbook" => "http://www4.wiwiss.fu-berlin.de/factbook/resource/Turkey",
                "opencyc" => "http://sw.opencyc.org/concept/Mx4rvViERpwpEbGdrcN5Y29ycA"
            }
        },
    [ 1] {
        "type" => "Person",
        "relevance" => "0.518439",
        "count" => "5",
        "text" => "Jack Bishop"
    },
    [ 2] {
        "type" => "Person",
        "relevance" => "0.494382",
        "count" => "4",
        "text" => "Bridget Lancaster"
    },
    [ 3] {
        "type" => "Continent",
        "relevance" => "0.465512",
        "count" => "4",
        "text" => "America"
    },
    [ 4] {
        "type" => "Person",
        "relevance" => "0.339525",
        "count" => "1",
        "text" => "Terry Gross",
        "disambiguated" => {
            "subType" => [
                [0] "AwardWinner",
            [1] "BroadcastArtist"
            ],
            "name" => "Terry Gross",
            "website" => "http://freshair.npr.org/",
            "dbpedia" => "http://dbpedia.org/resource/Terry_Gross",
            "freebase" => "http://rdf.freebase.com/ns/m.0240z3",
            "yago" => "http://yago-knowledge.org/resource/Terry_Gross"
        }
    },
    [ 5] {
        "type" => "Company",
        "relevance" => "0.3354",
        "count" => "1",
        "text" => "Fresh Air"
    },
    [ 6] {
        "type" => "City",
        "relevance" => "0.326486",
        "count" => "1",
        "text" => "Lancaster"
    },
    [ 7] {
        "type" => "JobTitle",
        "relevance" => "0.324204",
        "count" => "1",
        "text" => "editorial director"
    },
    [ 8] {
        "type" => "Person",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "brown"
    },
    [ 9] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "3",
        "text" => "2 teaspoons"
    },
    [10] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "3",
        "text" => "30 minutes"
    },
    [11] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "3",
        "text" => "40 minutes"
    },
    [12] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "2",
        "text" => "8 tablespoons"
    },
    [13] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "2",
        "text" => "1 teaspoon"
    },
    [14] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "2",
        "text" => "2 teaspoon"
    },
    [15] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "2",
        "text" => "1 cup"
    },
    [16] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "2",
        "text" => "3 cup"
    },
    [17] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "Twenty-four hours"
    },
    [18] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "4 tablespoons"
    },
    [19] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "6 tablespoons"
    },
    [20] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "1 tablespoon"
    },
    [21] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "130 degrees"
    },
    [22] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "350 degrees"
    },
    [23] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "14 minutes"
    },
    [24] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "24 minutes"
    },
    [25] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "35 minutes"
    },
    [26] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "4 teaspoon"
    },
    [27] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "14 pounds"
    },
    [28] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "2 minutes"
    },
    [29] {
        "type" => "Quantity",
        "relevance" => "0.305211",
        "count" => "1",
        "text" => "5 minutes"
    }
    ]
}

```

##画像のタグ付け

###Method

```ruby
alchemyapi.image_tag('url', demo_url, { 'extractMode'=>'trust-metadata' }) 
```
###Response

```ruby
{
    "status" => "OK",
        "usage" => "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
        "NOTICE" => "THIS API FUNCTIONALITY IS DEPRECATED AND HAS BEEN MIGRATED TO WATSON VISUAL RECOGNITION. THIS API WILL BE DISABLED ON MAY 19, 2017.",
        "url" => "https://media.npr.org/assets/img/2016/07/20/greeneggsandham-08da5dc66f116a654b69391e04a8a46d7018af35.jpg?s=300",
        "totalTransactions" => "5",
        "imageKeywords" => [
            [0] {
                "text" => "food",
                "score" => "0.989013"
            },
        [1] {
            "text" => "eggs benedict",
            "score" => "0.710949"
        }
        ]
}

```
